<h1 ng-if="isNew">Create a webhook</h1>
<h1 ng-if="!isNew">Edit webhook</h1>
<div class="panel panel-default">
  <div class="panel-heading"><h3 class="panel-title">Hook Details</h3></div>
  <div class="panel-body">
    <form>
      <div class="form-group" ng-if="hook.id">
        <label for="id">ID</label>
        <input id="id" type="text" class="form-control" ng-readonly="true" ng-model="hook.id">
      </div>
      <div class="form-group">
        <label for="url">Endpoint url <small>(where do you want us to send events?)</small></label>
        <input type="url" class="form-control" id="url" placeholder="http://youserver/api/webhook_handler" ng-model="hook.url">
      </div>
      <div class="form-group">
        <label for="rate">Maximum rate per minute</label>
        <input type="number" class="form-control" id="rate" placeholder="600" ng-model="hook.rate">
      </div>
      <button type="submit" class="btn btn-default" ui-sref="app.home">Cancel</button>
      <button type="submit" class="btn btn-primary" ng-click="save()">Save</button>
    </form>
  </div>
</div>

<div class="panel panel-default" ng-if="hook.id">
  <div class="panel-heading">
    <h3 class="panel-title">Filters <small><a href="#" ng-click="addFilter()"><i class="fa fa-filter"></i> Add Filter</a></small></h3>
  </div>
  <div class="panel-body">
    <div>

      <form class="form-inline">
        <div class="form-group">
          <label class="sr-only" for="src">Source Filter</label>
          <input type="text" class="form-control" id="src" placeholder="Source filter" ng-model="filter.src">
        </div>
        <div class="form-group">
          <label class="sr-only" for="evt">Event filter</label>
          <input type="text" class="form-control" id="evt" placeholder="Event filter" ng-model="filter.evt">
        </div>
        <div class="form-group">
          <label class="sr-only" for="key">Key Filter</label>
          <input type="text" class="form-control" id="key" placeholder="Key filter" ng-model="filter.key">
        </div>
        <button class="btn btn-primary" ng-click="addFilter()">Add</button>
      </form>


    </div>
    <table class="table table-condensed table-striped">
      <tr ng-repeat="filter in filters">
        <td ng-bind="filter.src"></td>
        <td ng-bind="filter.evt"></td>
        <td ng-bind="filter.key"></td>
      </tr>
    </table>
  </div>
</div>
